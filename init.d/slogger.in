#!@SBINDIR@/openrc-run
# Copyright (c) 2014-15 Will Miles, Sander Geophysics Ltd. <wmiles@sgl.com>
# Released under the 2-clause BSD license.

command=/bin/slogger
command_args=$slogger_args
description="QNX driver system logger"
name=slogger

depend()
{
    keyword -stop
}    

start()
{
    # Don't start the program if it's already running; just take it over
    if [ ! -w /dev/slog ] ; then        
        ebegin "Starting $name"
        $command $command_args
        eend
    else
        einfo "Skipping $name: started by initrd"
    fi
}

stop()
{
    # Explicitly do not check for argument match
    ebegin "Stopping $name"
    start-stop-daemon -K -n slogger
    eend
}
